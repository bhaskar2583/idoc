CREATE TABLE [dbo].[Carriers] (
    [Car_Id]           INT           IDENTITY (1, 1) NOT NULL,
    [Car_Name]         VARCHAR (100) NOT NULL,
    [Car_AddressLine1] VARCHAR (MAX) NOT NULL,
    [Car_AddressLine2] VARCHAR (MAX) NULL,
    [Car_City]         VARCHAR (500) NULL,
    [Car_State]        VARCHAR (50)  NULL,
    [Car_ZipCode]      VARCHAR (10)  NULL,
    [Car_Phone]        VARCHAR (10)  NOT NULL,
    [Car_Email]        VARCHAR (100) NOT NULL,
    [Car_IsActive]     BIT           DEFAULT ((1)) NOT NULL,
    [Car_AddUser]      VARCHAR (100) NOT NULL,
    [Car_AddDate]      DATETIME      DEFAULT (getdate()) NOT NULL,
    [Car_RevUser]      VARCHAR (100) NULL,
    [Car_RevDate]      DATETIME      NULL,
    PRIMARY KEY CLUSTERED ([Car_Id] ASC)
);

CREATE TABLE [dbo].[Policies] (
    [Pol_Id]             INT           IDENTITY (1, 1) NOT NULL,
    [Pol_PolicyNumber]   VARCHAR (500) NOT NULL,
    [Pol_PolicyType]     VARCHAR (100) NOT NULL,
    [Pol_Car_Id]         INT           NOT NULL,
    [Pol_EffectiveDate]  DATETIME      NOT NULL,
    [Pol_EndDate]        DATETIME      NOT NULL,
    [Pol_GroupInsurence] BIT           DEFAULT ((0)) NOT NULL,
    [Pol_IsActive]       BIT           DEFAULT ((1)) NOT NULL,
    [Pol_AddUser]        VARCHAR (100) NOT NULL,
    [Pol_AddDate]        DATETIME      DEFAULT (getdate()) NOT NULL,
    [Pol_RevUser]        VARCHAR (100) NULL,
    [Pol_RevDate]        DATETIME      NULL,
    [Pol_Cov_Id]         INT           NOT NULL,
    [Pol_Pro_Id]         INT           NOT NULL,
    CONSTRAINT [PK_Policies] PRIMARY KEY CLUSTERED ([Pol_PolicyNumber] ASC, [Pol_Cov_Id] ASC, [Pol_Pro_Id] ASC, [Pol_Car_Id] ASC),
    UNIQUE NONCLUSTERED ([Pol_Id] ASC),
    CONSTRAINT [FK_Policies_Car_Id] FOREIGN KEY ([Pol_Car_Id]) REFERENCES [dbo].[Carriers] ([Car_Id]),
    CONSTRAINT [FK_Policies_Cov_Id] FOREIGN KEY ([Pol_Cov_Id]) REFERENCES [dbo].[Coverages] ([Cov_Id]),
    CONSTRAINT [FK_Policies_Pro_Id] FOREIGN KEY ([Pol_Pro_Id]) REFERENCES [dbo].[Products] ([Pro_Id])
);



CREATE TABLE [dbo].[Clients]
(
	[Cli_Id] INT NOT NULL PRIMARY KEY IDENTITY, 
    [Cli_Name] VARCHAR(500) NOT NULL, 
    [Cli_Division] VARCHAR(50) NOT NULL,
	[Cli_IsActive]       BIT           DEFAULT ((1)) NOT NULL,
    [Cli_AddUser]        VARCHAR (100) NOT NULL,
    [Cli_AddDate]        DATETIME      DEFAULT (getdate()) NOT NULL,
    [Cli_RevUser]        VARCHAR (100) NULL,
    [Cli_RevDate]        DATETIME      NULL,
)


CREATE TABLE [dbo].[ClientPolicies] (
    [Cp_Id]        INT           IDENTITY (1, 1) NOT NULL,
    [Cp_ClientId]  INT           NOT NULL,
    [Cp_PolicieId] INT           NOT NULL,
    [Cp_IsActive]  BIT           DEFAULT ((1)) NOT NULL,
    [Cp_AddUser]   VARCHAR (100) NOT NULL,
    [Cp_AddDate]   DATETIME      DEFAULT (getdate()) NOT NULL,
    [Cp_RevUser]   VARCHAR (100) NULL,
    [Cp_RevDate]   DATETIME      NULL,
    PRIMARY KEY CLUSTERED ([Cp_Id] ASC),
    CONSTRAINT [FK_ClientPolicies_ClientId] FOREIGN KEY ([Cp_ClientId]) REFERENCES [dbo].[Clients] ([Cli_Id]),
    CONSTRAINT [FK_ClientPolicies_PolicyId] FOREIGN KEY ([Cp_PolicieId]) REFERENCES [dbo].[Policies] ([Pol_Id])
);

CREATE TABLE [dbo].[ClientPolicieBudgets] (
    [Pb_Id]        INT             IDENTITY (1, 1) NOT NULL,
    [Pb_Cpl_Id]    INT             NOT NULL,
    [Pb_Pol_Id]    INT             NOT NULL,
    [Pb_Cli_Id]    INT             NOT NULL,
    [Pb_Bud_Year]  INT             NOT NULL,
    [Pb_Bud_Month] VARCHAR (50)    NOT NULL,
    [pb_Bud_Value] DECIMAL (18, 2) NOT NULL,
    [Pb_IsActive]  BIT             DEFAULT ((1)) NOT NULL,
    [Pb_AddUser]   VARCHAR (100)   NOT NULL,
    [Pb_AddDate]   DATETIME        DEFAULT (getdate()) NOT NULL,
    [Pb_RevUser]   VARCHAR (100)   NULL,
    [Pb_RevDate]   DATETIME        NULL,
    PRIMARY KEY CLUSTERED ([Pb_Id] ASC),
    CONSTRAINT [FK_Pb_PolicyId] FOREIGN KEY ([Pb_Pol_Id]) REFERENCES [dbo].[Policies] ([Pol_Id])
);







CREATE TABLE [dbo].[Products] (
    [Pro_Id]     INT           IDENTITY (1, 1) NOT NULL,
    [Pro_Name]   VARCHAR (500) NOT NULL,
    [Pro_Cov_Id] INT           NOT NULL,
    PRIMARY KEY CLUSTERED ([Pro_Id] ASC),
    CONSTRAINT [FK_Product_CovId] FOREIGN KEY ([Pro_Cov_Id]) REFERENCES [dbo].[Coverages] ([Cov_Id])
);



CREATE TABLE [dbo].[Commision] (
    [Com_Id]             INT             IDENTITY (1, 1) NOT NULL,
    [Com_CarrierId]      INT             NULL,
    [Com_PolicyId]       INT             NULL,
    [Com_ClientId]       INT             NULL,
    [Com_ClientPolicyId] INT             NULL,
    [Com_Commision]      DECIMAL (18, 2) NULL,
    [Com_AppliedDate]    DATETIME        NULL,
    [Com_PaymentId]      VARCHAR (50)    NULL,
    [Com_StatementDate]  DATETIME        NULL,
    [Com_AddUser]        VARCHAR (100)   NOT NULL,
    [Com_AddDate]        DATETIME        DEFAULT (getdate()) NOT NULL,
    [Com_RevUser]        VARCHAR (100)   NULL,
    [Com_RevDate]        DATETIME        NULL,
    PRIMARY KEY CLUSTERED ([Com_Id] ASC)
);

